@page
@model IndexModel
@{
    ViewData["Title"] = "Profile";
    ViewData["ActivePage"] = ManageNavPages.Index;
}

<style>
    section.profileLeft {
        color: black;
        border: 1px solid black;
        height: fit-content;
        width: 90%;
        border-radius: 10px;
        padding-bottom: 10px;
    }

    button {
        background-color: Transparent;
        border: 1px solid black;
    }
</style>
<section class="profileLeft" style="background-color:white">
    <h4><center> Зустрічі </center></h4>
    <style>
        td {
            white-space: nowrap;
        }
    </style>
    <div>
        <table cellpadding="10" style="margin-left:auto; margin-right: auto; table-layout:fixed;">
            @if (Model.CreatedMeetings?.Any() == true)
            {
                @foreach (var item in Model.CreatedMeetings)
                {
                    <tr>
                        <td>
                            @if (Model.UserInfo.Id == item.CreatorId)
                            {
                                <img src="~/images/crown.png" style="height: 30px; margin-left: 3%; margin-bottom: 1%; display: inline-block; width: 30px ">
                            }
                            else
                            {
                                <img src="~/images/DefaultUser.png" style="height: 30px; margin-left: 3%; margin-bottom: 1%; display: inline-block; width: 30px ">
                            }
                        </td>
                        <td>
                            @if (item.PhotoLink != null)
                            {
                                <img src="@item.PhotoLink" style="height: 30px; margin-left: 1%; margin-bottom: 1%; display: inline-block; width: 30px ">
                            }
                            else
                            {
                                <img src="~/BoardGamesPicture/defaultBoardGame.jpg" style="height: 30px; margin-left: 1%; margin-bottom: 1%; display: inline-block; width: 30px ">
                            }
                        </td>
                        <td><h5 style="display: inline-block; margin-left: 1%">@item.MeetingName</h5></td>
                        <td><h5 style="display: inline-block; margin-left: 1%">@item.AddresOfMeeting</h5></td>
                        <td><h5 style="display: inline-block; margin-left: 1%">@item.DateOfMeeting</h5></td>
                        <td><img src="~/images/DefaultUser.png" style=" margin-bottom: 1%; height: 30px; display: inline-block; margin-left: 1%; width: 30px"></td>
                        <td><h5 style="display: inline-block">@item.Requests.Count(i => i.StateId == 2) / @item.Game.MaxAmountOfPlayers</h5></td>
                        <td>
                            <a href="/Meeting/Details/@item.MeetingId" style="text-decoration-color:black">
                                <button type="submit"  class="nav-link btn btn-link text-black" style="font-family: 'Bluu Next Cyrillic';border-radius:5px;border-color:black;color:black;border-width:2px">Details</button>
                            </a>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td><h5 style="display: inline-block; margin-left: 1%">Немає зустрічей, в яких ви брали участь</h5></td>
                </tr>
            }
        </table>
    </div>

    @*
        <ul class="nav nav-pills flex-column">
            <li class="nav-item"><a class="nav-link @ManageNavPages.IndexNavClass(ViewContext)" id="profile" asp-page="./Index">Profile</a></li>
            <li class="nav-item"><a class="nav-link @ManageNavPages.EmailNavClass(ViewContext)" id="email" asp-page="./Email">Email</a></li>
            <li class="nav-item"><a class="nav-link @ManageNavPages.ChangePasswordNavClass(ViewContext)" id="change-password" asp-page="./ChangePassword">Password</a></li>
            @if (hasExternalLogins)
            {
                <li id="external-logins" class="nav-item"><a id="external-login" class="nav-link @ManageNavPages.ExternalLoginsNavClass(ViewContext)" asp-page="./ExternalLogins">External logins</a></li>
            }
            <li class="nav-item"><a class="nav-link @ManageNavPages.TwoFactorAuthenticationNavClass(ViewContext)" id="two-factor" asp-page="./TwoFactorAuthentication">Two-factor authentication</a></li>
            <li class="nav-item"><a class="nav-link @ManageNavPages.PersonalDataNavClass(ViewContext)" id="personal-data" asp-page="./PersonalData">Personal data</a></li>
        </ul>*@
</section>